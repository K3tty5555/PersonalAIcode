---
name: ai-pm-prd
description: >-
  PRD 生成技能。整合分析、竞品、用户故事等输入，输出完整的 PRD 文档。
  包括产品概述、功能详述、流程图、数据埋点、迭代计划等。
argument-hint: "[输入文件路径列表]"
allowed-tools: Read Write Edit Bash(mkdir)
---

# PRD 生成

## 执行协议

- 整合所有前置分析的输出
- 生成专业、完整的 PRD 文档
- 确保文档结构清晰、易于阅读
- **用户确认**：生成前确认关键信息，生成后提供修改建议
- 包含所有必要的产品信息

## PRD 结构

### 1. 文档信息
- 版本号、修订历史、文档状态

### 2. 产品概述
- 产品背景、目标、范围

### 3. 需求分析
- 用户画像、痛点、场景

### 4. 产品目标
- 业务目标、用户目标、成功指标

### 5. 功能规格
- 功能清单、详细说明、流程图

### 6. 非功能需求
- 性能、安全、兼容性

### 7. 数据埋点
- 需要追踪的数据指标

### 8. 迭代计划
- 版本规划、里程碑

### 9. 附录
- 术语表、参考资料

## 输出格式

输出文件：`{项目目录}/05-PRD-v1.0.md`

**项目目录通过环境变量或参数获取：**
- 优先从 `$PROJECT_DIR` 环境变量读取
- 其次从参数读取
- 默认回退到 `./ai-pm/output/projects/default/`

```markdown
# 产品需求文档（PRD）

## 文档信息

| 项目 | 内容 |
|------|------|
| 产品名称 | {产品名} |
| 版本号 | v1.0 |
| 创建日期 | {日期} |
| 最后更新 | {日期} |
| 文档状态 | 草稿/评审中/已批准 |
| 产品经理 | {姓名} |

### 修订历史

| 版本 | 日期 | 修改内容 | 作者 |
|------|------|---------|------|
| v0.1 | ... | 初稿 | ... |
| v0.2 | ... | 补充功能细节 | ... |

---

## 1. 产品概述

### 1.1 产品背景
{市场背景、用户痛点、为什么要做}

### 1.2 产品目标
{一句话描述产品要解决什么问题}

### 1.3 产品范围
**包含：**
- 功能范围 A
- 功能范围 B

**不包含：**
- 排除的功能及原因

### 1.4 目标用户
{用户画像简述，详见需求分析}

---

## 2. 需求分析

### 2.1 用户画像

#### 核心用户
- **角色**：...
- **特征**：...
- **需求**：...

### 2.2 用户痛点
{痛点描述，引用需求分析}

### 2.3 使用场景

#### 场景 1: {场景名称}
**背景**：...
**用户行为**：...
**预期结果**：...

---

## 3. 产品目标与指标

### 3.1 业务目标
- 目标 1
- 目标 2

### 3.2 用户目标
- 目标 1
- 目标 2

### 3.3 成功指标

#### 北极星指标
{指标名称}：{定义}

#### 关键指标
| 指标名称 | 定义 | 目标值 | 当前值 |
|---------|------|-------|-------|
| 指标1 | ... | ... | ... |

---

## 4. 功能规格

### 4.1 功能架构图
```
[功能架构的文字描述或简单层级]
```

### 4.2 功能清单

| 模块 | 功能 | 优先级 | 状态 | 备注 |
|------|------|-------|------|------|
| 模块A | 功能1 | P0 | 规划中 | ... |

### 4.3 功能详细说明

#### 功能 1: {功能名称}

**功能描述**：
{功能是什么，解决什么问题}

**用户价值**：
{用户能获得什么}

**业务流程**：
```
开始 → 步骤1 → 步骤2 → 步骤3 → 结束
```

**产品规则**：
- 规则 1
- 规则 2

**界面说明**：
{页面布局、元素说明}

**交互逻辑**：
{用户操作的反馈}

**异常处理**：
| 异常情况 | 处理方式 |
|---------|---------|
| 异常1 | 处理方式1 |

**数据需求**：
{输入数据、输出数据}

#### 功能 2: {功能名称}
{同上格式}

### 4.4 流程图

#### 主流程
```
[文字描述的流程]
```

#### 分支流程
{子流程说明}

---

## 5. 非功能需求

### 5.1 性能需求
- 页面加载时间 < 2s
- 接口响应时间 < 500ms
- 支持并发用户数 > 10000

### 5.2 安全需求
- 用户数据加密存储
- 敏感操作需要身份验证
- 符合数据保护法规

### 5.3 兼容性需求
- 浏览器兼容性
- 移动端适配
- 操作系统兼容性

### 5.4 可用性需求
- 系统可用性 > 99.9%
- 支持降级方案

---

## 6. 数据埋点

### 6.1 埋点清单

| 事件名称 | 触发时机 | 事件参数 | 用途 |
|---------|---------|---------|------|
| 页面浏览 | 进入页面 | page_id, user_id | PV统计 |
| 按钮点击 | 点击按钮 | button_id, context | 转化分析 |

### 6.2 需要监控的指标
- 日活跃用户（DAU）
- 功能使用率
- 转化率
- 用户留存

---

## 7. 迭代计划

### 7.1 版本规划

| 版本 | 功能范围 | 计划时间 | 目标 |
|------|---------|---------|------|
| v1.0 MVP | 核心功能 | Q1 | 验证需求 |
| v1.1 | 增强功能 | Q2 | 提升留存 |
| v2.0 | 完整功能 | Q3 | 规模化 |

### 7.2 里程碑

| 里程碑 | 日期 | 交付物 | 成功标准 |
|-------|------|-------|---------|
| 设计完成 | ... | 设计稿 | 评审通过 |
| 开发完成 | ... | 可测试版本 | 功能完成 |
| 测试完成 | ... | 测试报告 | Bug清零 |
| 正式上线 | ... | 生产版本 | 监控正常 |

---

## 8. 风险与依赖

### 8.1 风险清单

| 风险 | 影响 | 概率 | 应对措施 |
|------|------|------|---------|
| 技术风险 | 高 | 中 | 提前验证 |

### 8.2 外部依赖

| 依赖项 | 依赖方 | 状态 | 备注 |
|-------|-------|------|------|
| 第三方API | 供应商 | 待确认 | 需要商务谈判 |

---

## 9. 附录

### 9.1 术语表

| 术语 | 解释 |
|------|------|
| 术语1 | 解释1 |

### 9.2 参考资料
- 需求分析报告
- 竞品研究报告
- 用户故事文档

### 9.3 相关文档链接
{其他相关文档}
```

## 执行步骤

1. 读取需求分析报告
2. 读取竞品研究报告
3. 读取用户故事文档
4. 整合信息填充 PRD 模板
5. 输出完整 PRD 文档
